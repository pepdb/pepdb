#sinatra_authentication
  %form{:id => "adddata",:action => "/add-user", :method => "post"}
    %fieldset
      %legend User data:
      %p
        %label{:for => "user_username"} 
          %span Username
          %input{ :id => "user_username", :name => "user[username]", :size => 30, :type => "text" , :value => params[:username]}
      %p
        %label{:for => "user_password"} 
          %span Password
          %input{ :id => "user_password", :name => "user[password]", :size => 30, :type => "password" }
      %p
        %label{:for => "user_password_confirmation"} 
          %span Confirm Password
          %input{ :id => "user_password_confirmation", :name => "user[password_confirmation]", :size => 30, :type => "password" }
    %fieldset
      %legend< accessible selections
      %p.checklist
        - selections.each do |sel|
          %input{:type => "checkbox", :id => "sel_access", :name => "selections[]", :value => sel[:selection_name].to_s}>
          = sel[:selection_name]
          %br<      
    .buttons
      %input{ :value => "Add user", :type => "submit" }
- if Rack.const_defined?('Flash') && flash[:notice]
  .ui-widget
    %div{:class => "ui-state-highlight ui-corner-all", :id => "highlightbox"}
      %p
        %span{:class => "ui-icon ui-icon-info", :id => "highlightspan"}
          %p
            = flash[:notice] 
- if Rack.const_defined?('Flash') && flash[:error]
  .ui-widget
    %div{:class => "ui-state-error ui-corner-all", :id=> "errorbox"}
      %p
        %span{:class => "ui-icon ui-icon-alert", :id => "errorspan"}
        %strong Error:
        = flash[:error] 
